# ממ"ן 12 #

## התכנית הראשית ##

•	בדיקת חוקיות שימוש, פתיחת קבצים, והדפסת הפלט לקובץ TOK ולמסך. הנחה: גודל קובץ CPL < KB 25.

•	כל עוד לא חזר אסימון "סוף קובץ" מדפיסים את האסימון (אם הוא מוכר) ומבקשים את האסימון המופיע בהמשך הקלט. לקידום המצביע על המיקום בקלט אחראי המנתח.

## המנתח ##

 פועל ב 4 שלבים:

א.	"דילוג" על רווחים. טאבים ושורה חדשה. אם יש שורה חדשה מקדמים את
old_index המצביע על תחילת השורה ומדפיסים את השורה לקובץ LST (הנחה: אורך שורה עד 300 תווים).

ב.	נסיון התאמת הקלט לאסימון שהלקסמה שלו מורכבת מאותיות בלבד. (check_strings) במקרה כזה אם אין לאחר ההתאמה סיפרה או אות מצאנו אסימון "שמור", אחרת יש לנו ID.

אם נמצאה לקסמה (keyword != -1) מחזירים את האסימון המתאים לה בצירוף הלקסמה אם יש תכונות לאסימון. לדוגמא: ADDOP מתאים ל+ או - בעוד Prog לא.

ג.	נסיון התאמת הקלט לאסימון שהלקסמה שלו לא מורכבת מאותיות אלא סימנים אחרים, על-מנת לחסוך במכונת המצבים. (don’t_check_strings)

אם נמצאה לקסמה מחזירים את האסימון המתאים לה בצירוף הלקסמה אם יש תכונות לאסימון.  לדוגמא: RELOP והלקסמה שנמצאה בעוד BLOCK_BEGIN זה תמיד }.

ד.	מעבר ע"י מכונת מצבים על הקלט עד לתו לא חוקי. בסוף מחזירים את האסימון שנמצא. שגיאות אפשריות: ID ארוך מדי או תו לא חוקי.

## טבלת המצבים ##

הטבלה אינה מכילה אסימונים קבועים (var, else…), המנתח הלקסיקלי הוא זה המבחין בינם לבין ID אחרים.

ממומשת ע"י hash table. זמן חיפוש אסימון הוא n/l כאשר n מספר אסימונים ו-l מספר הכניסות בטבלה. ההקצאה דינמית (כי בעתיד מספר האסימונים בזמן ההידור יהיה גדול מאוד בגלל משתנים זמניים).
