# Quad -  qx


 מפרש (interpreter) של - quad הנועד לקרוא תכניות ,quad להריץ אותן אם הן תקינות, או להודיע שהן שגויות. המפרש מקבל כפרמטר יחיד בשורת הפקודה שם של קובץ קלט קובץ טקסט המכיל תכנית בשפת .quad שים לב: 1. הסיומת של קובץ זה חייבת להיות .qud 2. הפקודות נכתבות באותיות קטנות ואילו המשתנים באותיות קטנות.

בשורת הפקודה של חלוןDOS  הקש:	`qx  filename.qud`
אם שם קובץ הקלט שגוי, או אם המפרש לא מצליח לפתוח את הקובץ לקריאה  -ניתנת הודעה מתאימה על המסך. אם פתיחת הקובץ תקינה, המפרש קורא אותו ויוצר קובץ טקסט עם שם זהה לשם קובץ הקלט ועם סיומת .ob הקובץ מכיל:
-	ייצוג "נומרי" של התכנית, שבו מזהים מוחלפים במספרים המראים את הייצוג הפנימי של המזהים (ה"מען" של המזהים). קבועים מספריים מופיעים בקובץ עם התו "#" אחריהם, כדי להבדילם ממזהים.
-	טבלת-מזהים הכוללת: מזהים, ייצוגם הפנימי וטיפוסם.

אם קריאת התכנית מסתיימת בהצלחה, המפרש מריץ את התכנית. קלט/פלט של התכנית מתבצע בזמן ההרצה דרך לוח-המקשים/המסך, והודעות שגיאה (אם קיימות) נרשמות גם הן למסך. במקרה זה המפרש יוצר גם קובץ טקסט עם שם כנ"ל וסיומת .trc ובו מעקב(trace)  אחר ההרצה. בקובץ נרשמים עבור כל הוראה שמבוצעת: הערך של  ,pcערך הארגומנט שאליו בוצעה השמה, או ערך הארגומנט שהודפס, או ערך הארגומנט ששימש להחלטה על קפיצה מותנית. בהוראת קפיצה נרשם גם הערך של יעד הקפיצה.

המפרש נועד בעיקר להרצת תכניות תקינות; יש לו יכולת די מוגבלת של טיפול בשגיאות. כאשר תכנית הקלט שגויה, ייתכן שההודעה על מהות השגיאה או על מיקומה לא תהיה מדויקת. במקרה כזה עיון בקבצים .ob ו .trc עשוי להבהיר מה התרחש.

מספר שגוי של ארגומנטים בהוראה מבלבל את המפרש, ועשוי לגרום לו לקרוא קלט משורות אחרות. בכל מקרה, הקובץ ob. יגלה מה המפרש הבין מהתכנית שקרא. הוראת HALT חסרה תגרום לניסיון לקרוא מעבר לסוף קובץ הקלט.

המפרש בודק תקינות של קודי-הוראה וחוקיות הארגומנטים. אם מזהה משנה את טיפוסו במהלך התכנית, נרשמת הודעה בקובץ .ob ניסיון לחלוקה ב0- גורם לעצירת הביצוע. לא מתבצעת שום בדיקה של שימוש במשתנים לא מאותחלים.

 ## מגבלות ##

-	גודל תכנית מוגבל ל1000- הוראות.
-	מספר המשתנים מוגבל ל1000-.
-	אורך שורה מוגבל ל80- תווים. שורות ארוכות יותר נחתכות.
-	אורך המזהים מוגבל ל-10 תווים. מזהים ארוכים יותר נחתכים.
-	מספרים שלמים אינם יכולים לעלות על 32767.
-	מספרים ממשיים מודפסים ברוחב שדה כולל של 10 תווים, עם ארבע ספרות מימין לנקודה.

## BUGS ##

המפרש מתעלם מסופי שורות בחיפוש אחרי ארגומנטים. הוא אינו מבחין במצבים השגויים האלה:
-	שורה מכילה יותר מהוראה אחת.
-	ארגומנטים שאינם באותה שורה כמו קוד-ההוראה.
-	המפרש מתעלם מהוראות המופיעות אחרי הוראה מסוג  .HALT 
-	המפרש לא מאתר גלישה (overflow) בפעולות על שלמים. כאשר מתקבלת תוצאה אריתמטית שגויה כדאי לבדוק אם היתה גלישה במהלך החישוב.
